site:
  title: Kubewarden
  start_page: 1.31@kubewarden:en:introduction.adoc

urls:
  html_extension_style: indexify
  redirect_facility: static
  latest_version_segment: latest
  latest_prerelease_version_segment: dev

content:
  sources:
    # - url: https://github.com/rancher/kubewarden-product-docs.git
    - url: ./
      branches: HEAD
      # Branches need to be HEAD, not [main]. For remote community build to
      # work. To do with the switching of antora.yml files between product and
      # community. Not exactly clear why this is necessary though.
      start_paths: [shared, docs/version-*]

ui:
  bundle:
    url: https://github.com/SUSEdoc/dsc-style-bundle/blob/main/default-ui/ui-bundle.zip?raw=true
    snapshot: true
  supplemental_files: ./kw-community-docs-supp-files

asciidoc:
  attributes:
    # page-draft-preview-only: 'true'
    kw-build-community: true
    build-environment: netlify
    page-pagination: ''
    tabs-sync-option: ''
  extensions:
    - '@asciidoctor/tabs'

antora:
  extensions:
    # - require: "@antora/pdf-extension"
    - require: "@antora/lunr-extension"
      index_latest_only: true
    - require: "@sntke/antora-mermaid-extension"
      mermaid_library_url: https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs # <2>
      script_stem: header-scripts # <3>
      mermaid_initialize_options: # <4>
    - require: ./product-docs-common/extensions/dynamic-loading-attributes/load-global-site-attributes.js
      attributefile: ./product-docs-common/global-attributes.yml
      enabled: true
    - require: ./product-docs-common/extensions/versions-latest-prerelease/vlp.js
      enabled: true

output:
  dir: build-remote-community/site
